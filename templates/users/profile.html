{% extends 'base.html' %}

{% block content %}
  <h2>Профиль пользователя</h2>
  <p>Имя пользователя: {{ user.username }}</p>
  <p>Email: {{ user.email }}</p>

  <h3>Текущий адрес доставки по умолчанию</h3>
  {% if default_address %}
    <p>{{ default_address.street }}, {{ default_address.city }}, {{ default_address.state }}, {{ default_address.postal_code }}, {{ default_address.country }}</p>
  {% else %}
    <p>Адрес по умолчанию не установлен.</p>
  {% endif %}

  <h3>Выберите адрес по умолчанию</h3>
  <form method="post" action="{% url 'set_default_address' %}">
    {% csrf_token %}
    <select name="default_address">
      {% for address in addresses %}
        <option value="{{ address.id }}" {% if address.is_default %}selected{% endif %}>
          {{ address.street }}, {{ address.city }}, {{ address.state }}, {{ address.postal_code }}, {{ address.country }}
        </option>
      {% endfor %}
    </select>
    <button type="submit">Установить как адрес по умолчанию</button>
  </form>

  <h4>Добавить новый адрес</h4>
  <a href="{% url 'add_address_page' %}" class="btn btn-primary">Добавить новый адрес</a>
{% endblock %}
